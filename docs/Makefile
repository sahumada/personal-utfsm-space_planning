# Makefile to process LaTeX files
#
# Goals:
#
#   dvi     --- creates the *.dvi
#   ps      --- creates the *.ps
#   pdf     --- creates the *.pdf


######################################################################
# Some binaries

# Name of latex executable, a custom format is made and loaded
LATEX = latex

# dvipdfm
DVIPDFM = dvipdfm -p letter

# bibtex
BIBTEX = bibtex

# dvips with some preloaded options
DVIPS = dvips -t letter

# warn user to read README for possible goals
DEFAULT:
	@echo ////////////////////////////////////////////////////////////
	@echo
	@echo Read the README to see the available options
	@echo
	@echo ////////////////////////////////////////////////////////////

# use this target as dependency to force other targets
FORCE:

######################################################################
# Files

MAIN_FILE = informe

# Auxiliary autogenerated files to delete before proceeding to new goals
#   aux --- main auxiliary file         (LaTeX)
#   bbl --- bibliography                (bibtex)
#   blg --- log of bibtex               (bibtex)
#   brf --- bibliography backreference  (hyperref[backref,pagebackref])
#   idx --- auxiliary index file        (makeindex)
#   ilg --- log of makeindex            (makeindex)
#   ind --- index tex file              (makeindex)
#   lof ---
#   log --- log of pdftex               (pdftex)
#   lot ---
#   out --- bookmarks for pdf           (pdftex)
#   toc --- table of contents           (\tableofcontents)
LATEX_AUX_FILES = $(MAIN_FILE).aux \
                  $(MAIN_FILE).bbl \
                  $(MAIN_FILE).blg \
                  $(MAIN_FILE).log

#####################################################################
# User options

# Make dvi file,
# three LaTeX runs are necessary:
#   one first,
#   then two more after bibtex to put all in place.
$(MAIN_FILE).dvi: FORCE \
                  $(MAIN_FILE).tex \
                  $(IMAGES)
	rm -f $(LATEX_AUX_FILES)
	$(LATEX)     $(MAIN_FILE)
	$(BIBTEX)    $(MAIN_FILE)
	$(LATEX)     $(MAIN_FILE)
	$(LATEX)     $(MAIN_FILE)

$(MAIN_FILE).ps: FORCE \
                 $(MAIN_FILE).dvi
	$(DVIPS) -o $(MAIN_FILE).ps $(MAIN_FILE).dvi

$(MAIN_FILE).pdf: FORCE \
                  $(MAIN_FILE).dvi
	$(DVIPDFM)   $(MAIN_FILE)

# main user targets
dvi:     $(MAIN_FILE).dvi
ps:      $(MAIN_FILE).ps
pdf:     $(MAIN_FILE).pdf

clean:
	rm -f $(LATEX_AUX_FILES)
	rm -f $(MAIN_FILE).dvi
	rm -f $(MAIN_FILE).ps
